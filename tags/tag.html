<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tag</title>
<link rel="stylesheet" href="../style.css">
</head>
<body>

<!-- Loader (optional) -->
<div class="loader" aria-hidden="true">
  <style>
  /* Loader styles (similar to homepage) */
  .loader {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    transition: opacity 0.5s ease;
  }

  .loader.fade-out {
    opacity: 0;
    pointer-events: none;
  }
</style>
</div>

<!-- Header -->
<header class="banner">
  <h1 id="tag-title">Tag</h1>
</header>

<!-- Navbar -->
<nav class="navbar">
  <div class="logo">
    <img src="../Images/temporary-logo.jpg" alt="logo">
  </div>
  <ul class="topnav">
    <li><a href="../index.html">Home</a></li>
    <li class="dropdown"><a href="../reviews.html">Movie Reviews</a></li>
    <li><a href="../genre.html">Film Genres</a></li>
    <li><a href="../top20.html">Arya's Top 20</a></li>
    <li class="dropdown">
      <a href="#">Best and Worst</a>
      <div class="dropdown-content">
        <a href="../monthlybestworst.html">Monthly</a>
        <a href="../yearlybestworst.html">Yearly</a>
      </div>
    </li>
    <li class="dropdown">
      <a href="#">Lists and Guides</a>
      <div class="dropdown-content">
        <a href="../filmseries.html">Film Series</a>
        <a href="../genrespotlight.html">Genre Spotlights</a>
        <a href="../streamingrecs.html">Streaming Recs</a>
      </div>
    </li>
    <li><a href="../news.html">Movie News</a></li>
    <li><a href="../about.html">About</a></li>
    <li><a href="../contact.html">Contact</a></li>

    <div class="search-container">
      <input type="text" class="search-input" placeholder="Search...">
      <button class="search-icon">üîç</button>
    </div>
  </ul>
</nav>

<!-- Main content -->
<main>
  <div class="admin-controls-wrapper">
    <button id="admin-toggle" class="admin-btn">Admin Mode</button>
    <button id="add-block" style="display:none;">Add Content</button>
  </div>

  <section id="tag-content" class="tag-content"></section>

  <!-- Back to top button -->
  <button onclick="topFunction()" id="myBtn" title="Go to top">‚áß</button>
</main>

<!-- Footer -->
<footer>
  <p>&copy; 2025 Arya's Movie Musings</p>
</footer>

<script>
/*DOM References*/
const params = new URLSearchParams(window.location.search);
const tag = params.get("tag") || "Tag";
const title = document.getElementById("tag-title");
const contentSection = document.getElementById("tag-content");
const adminToggle = document.getElementById("admin-toggle");
const addBtn = document.getElementById("add-block");
title.textContent = tag;

let adminMode = false;
let tagPages = JSON.parse(localStorage.getItem("tagPages")) || {};

/*Render Tag Page*/
function renderTagPage() {
  contentSection.innerHTML = "";
  const blocks = tagPages[tag] || [];

  if (!blocks.length && !adminMode) return;

  blocks.forEach((block, index) => {
    const div = document.createElement("div");
    div.className = "tag-block";
    div.innerHTML = `
      <p>${block}</p>
      ${adminMode ? `<button onclick="deleteBlock(${index})">Delete</button>` : ""}
    `;
    contentSection.appendChild(div);
  });
}

/*Admin Mode*/
adminToggle.addEventListener("click", () => {
  adminMode = !adminMode;
  addBtn.style.display = adminMode ? "block" : "none";
  adminToggle.textContent = adminMode ? "Exit Admin Mode" : "Admin Mode";
  renderTagPage();
});

addBtn.addEventListener("click", () => {
  const text = prompt("Add content for this tag:");
  if (!text) return;

  tagPages[tag] = tagPages[tag] || [];
  tagPages[tag].push(text);

  localStorage.setItem("tagPages", JSON.stringify(tagPages));
  renderTagPage();
});

function deleteBlock(index) {
  tagPages[tag].splice(index, 1);
  localStorage.setItem("tagPages", JSON.stringify(tagPages));
  renderTagPage();
}

/*Back to top button*/
let mybutton = document.getElementById("myBtn");
window.onscroll = function() {
  mybutton.style.display = (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) ? "block" : "none";
};
function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}

/*Search bar toggle */
const searchIcon = document.querySelector('.search-icon');
const searchInput = document.querySelector('.search-input');
searchIcon.addEventListener('click', () => {
  searchInput.classList.toggle('expanded');
  if (searchInput.classList.contains('expanded')) searchInput.focus();
});
document.addEventListener('click', (e) => {
  if (!searchIcon.contains(e.target) && !searchInput.contains(e.target)) {
    searchInput.classList.remove('expanded');
  }
});

/*Loader */
const loader = document.querySelector(".loader");
window.addEventListener("load", () => {
  if (!loader) return;
  loader.classList.add("fade-out");
  loader.addEventListener("transitionend", () => {
    loader.style.display = "none";
    loader.setAttribute("aria-hidden", "true");
  }, { once: true });
});
/*Initial render */
renderTagPage();
</script>
</body>
</html>

<!--

API Read Access Token:
eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIwMGEyOWFmYzYzMGRiOTMxMzE0YzMyZjE1NjU0Mzk3MSIsIm5iZiI6MTc2NDUzMTU5NC43MjUsInN1YiI6IjY5MmM5ZDhhNTU4NTM0OTVjNzY0YTc1MiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.qO4J-UpFxJw_DItU1N4_18FON2pMb7wsm_NjZGmNGTI

API Key:
00a29afc630db931314c32f156543971

-->



